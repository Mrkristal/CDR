{% extends 'base.html' %}

{% block content %}
    <script>
        function myFunction() {
          // Declare variables
          var input, filter, table, tr, td, i, txtValue;
          input = document.getElementById("myInput");
          filter = input.value;
          table = document.getElementById("myTable");
          tr = table.getElementsByTagName("tr");

          // Loop through all table rows, and hide those who don't match the search query
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[3];
            if (td) {
              txtValue = td.textContent || td.innerText;
              if (txtValue.indexOf(filter) > -1) {
                tr[i].style.display = "";
              } else {
                tr[i].style.display = "none";
              }
            }
          }
        }

        </script>

<div class="row"><h2>Select Mailbox to delete:</h2>
            <input class="form-control me-sm-2" type="text" onkeyup="myFunction()" placeholder="Search" id="myInput">
            <form method="POST">
              <div class="table-responsive">
            <table id="myTable" class="table table-striped table-hover ">
              <thead>
              <tr id="myHeader">
                <th>Check</th>
                <th >First name</th>
                <th >Last name</th>
                <th >Mailbox</th>
                <th >Role</th>
                <th >Policy</th>
              </tr>
            </thead>
            <tbody >
            {% for row in data %}
              <tr>

                <td><input type="radio" value="{{row[0]}}" name="check"></td>
                <td>{{row[1]}}</td>
                <td>{{row[2]}}</td>
                <td>{{row[3]}}</td>
                <td>{{row[5]}}</td>
                <td>{{policy_list[row[6]-1][1]}}</td>

              </tr>
            {% endfor %}
            </tbody>

            </table></div>

          <div class="row">

              <input type="hidden" name="id" value="-1">
              <div class="row">
                <input class="btn btn-lg btn-primary" data-bs-toggle="tooltip" data-bs-placement="bottom" title="This will confirm the mailbox delete" type="submit" value="OK">
              </div></div></form></div>
{% endblock %}